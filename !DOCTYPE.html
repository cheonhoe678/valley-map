<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê³„ê³¡ ì§€ë„ ì„œë¹„ìŠ¤</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
    }

    /* ì™¼ìª½ ì‚¬ì´ë“œë°” */
    #sidebar {
      width: 250px;
      background: #f5f5f5;
      border-right: 1px solid #ddd;
      padding: 15px;
      overflow-y: auto;
    }

    #sidebar h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    #filter-section {
      margin-bottom: 20px;
    }

    #filter-section label {
      display: block;
      margin: 5px 0 2px;
      font-weight: bold;
    }

    #valley-list li {
      list-style: none;
      padding: 8px;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
    }

    #valley-list li:hover {
      background: #e6f0ff;
    }

    /* ë©”ì¸ ì§€ë„ */
    #map {
      flex: 1;
    }

    /* ì˜¤ë¥¸ìª½ ì •ë³´ íŒ¨ë„ */
    #info-panel {
      width: 300px;
      background: #fff;
      border-left: 1px solid #ddd;
      padding: 15px;
      overflow-y: auto;
    }

    #info-panel h2 {
      margin-top: 0;
    }

    /* ê´‘ê³  ì˜ì—­ */
    #ad-banner {
      margin-top: 20px;
      padding: 10px;
      background: #ffe680;
      text-align: center;
      border: 1px dashed #aaa;
    }

    /* ë¬¸ì˜ ì˜ì—­ */
    #footer {
      margin-top: 30px;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
  <div id="sidebar">
    <h2>ê²€ìƒ‰ í•„í„°</h2>
    <div id="filter-section">
      <label for="region-filter">ì§€ì—­</label>
      <select id="region-filter">
        <option value="all">ì „ì²´</option>
        <option value="Gangwon">ê°•ì›ë„</option>
        <option value="Gyeonggi">ê²½ê¸°ë„</option>
      </select>

      <label for="parking-filter">ì£¼ì°¨ ê°€ëŠ¥</label>
      <select id="parking-filter">
        <option value="all">ì „ì²´</option>
        <option value="yes">ìˆìŒ</option>
        <option value="no">ì—†ìŒ</option>
      </select>
    </div>

    <h2>ê³„ê³¡ ëª©ë¡</h2>
    <ul id="valley-list"></ul>
  </div>

  <!-- ë©”ì¸ ì§€ë„ -->
  <div id="map"></div>

  <!-- ì˜¤ë¥¸ìª½ ì •ë³´ íŒ¨ë„ -->
  <div id="info-panel">
    <h2>ê³„ê³¡ ì •ë³´</h2>
    <div id="valley-info">ì§€ë„ì—ì„œ ê³„ê³¡ì„ í´ë¦­í•˜ì„¸ìš”.</div>

    <div id="ad-banner">
      ğŸ“¢ ê´‘ê³  ë°°ë„ˆ ìë¦¬
    </div>

    <div id="footer">
      ë¬¸ì˜/í›„ì›: example@email.com
    </div>
  </div>

  <!-- ë„¤ì´ë²„ ì§€ë„ API -->
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=KH8BiFa1mEc6VAnJWO6QcFhGlL7dRM90ThSGk0aM"></script>
  <script>
    // ì§€ë„ ì´ˆê¸°í™”
    var map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.5665, 126.9780), // ì„œìš¸ ì¤‘ì‹¬
      zoom: 8
    });

    // ìƒ˜í”Œ ë°ì´í„°
    const valleys = [
      { name: "ì²­í‰ê³„ê³¡", region: "Gyeonggi", parking: "yes", lat: 37.738, lng: 127.310, depth: "1.5m", parkingInfo: "ì£¼ì°¨ì¥ 50ëŒ€ ê°€ëŠ¥" },
      { name: "ì†Œê¸ˆê°•ê³„ê³¡", region: "Gangwon", parking: "no", lat: 37.697, lng: 128.681, depth: "2.0m", parkingInfo: "ì£¼ì°¨ì¥ ì—†ìŒ" }
    ];

    const markers = [];
    const infoWindows = [];

    function renderMarkers() {
      markers.forEach(m => m.setMap(null));
      markers.length = 0;

      const region = document.getElementById('region-filter').value;
      const parking = document.getElementById('parking-filter').value;

      valleys.forEach((valley, idx) => {
        if ((region === 'all' || valley.region === region) &&
            (parking === 'all' || valley.parking === parking)) {
          const marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(valley.lat, valley.lng),
            map: map,
            title: valley.name
          });

          naver.maps.Event.addListener(marker, 'click', function() {
            showValleyInfo(valley);
          });

          markers.push(marker);
        }
      });

      renderList();
    }

    function renderList() {
      const list = document.getElementById('valley-list');
      list.innerHTML = '';

      const region = document.getElementById('region-filter').value;
      const parking = document.getElementById('parking-filter').value;

      valleys.forEach(valley => {
        if ((region === 'all' || valley.region === region) &&
            (parking === 'all' || valley.parking === parking)) {
          const li = document.createElement('li');
          li.textContent = valley.name;
          li.onclick = () => showValleyInfo(valley);
          list.appendChild(li);
        }
      });
    }

    function showValleyInfo(valley) {
      document.getElementById('valley-info').innerHTML = `
        <h3>${valley.name}</h3>
        <p>ì§€ì—­: ${valley.region}</p>
        <p>ìˆ˜ì‹¬: ${valley.depth}</p>
        <p>ì£¼ì°¨: ${valley.parkingInfo}</p>
      `;
    }

    document.getElementById('region-filter').addEventListener('change', renderMarkers);
    document.getElementById('parking-filter').addEventListener('change', renderMarkers);

    renderMarkers();
  </script>
</body>
</html>
