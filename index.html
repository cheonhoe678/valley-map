<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>계곡 지도 서비스</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; }
    #sidebar { width: 250px; background: #f5f5f5; border-right: 1px solid #ddd; padding: 15px; overflow-y: auto; }
    #sidebar h2 { font-size: 18px; margin-bottom: 10px; }
    #valley-list li { list-style: none; padding: 8px; border-bottom: 1px solid #ddd; cursor: pointer; }
    #valley-list li:hover { background: #e6f0ff; }
    #map { flex: 1; }
    #info-panel { width: 300px; background: #fff; border-left: 1px solid #ddd; padding: 15px; overflow-y: auto; }
    #info-panel h2 { margin-top: 0; }
    #ad-banner { margin-top: 20px; padding: 10px; background: #ffe680; text-align: center; border: 1px dashed #aaa; }
    #footer { margin-top: 30px; font-size: 14px; color: #666; }
  </style>
</head>
<body>
  <!-- 왼쪽 사이드바 -->
  <div id="sidebar">
    <h2>검색 필터</h2>
    <label for="region-filter">지역</label>
    <select id="region-filter">
      <option value="all">전체</option>
      <option value="Gangwon">강원도</option>
      <option value="Gyeonggi">경기도</option>
    </select>
    <label for="parking-filter">주차 가능</label>
    <select id="parking-filter">
      <option value="all">전체</option>
      <option value="yes">있음</option>
      <option value="no">없음</option>
    </select>
    <h2>계곡 목록</h2>
    <ul id="valley-list"></ul>
  </div>

  <!-- 메인 지도 -->
  <div id="map"></div>

  <!-- 오른쪽 정보 패널 -->
  <div id="info-panel">
    <h2>계곡 정보</h2>
    <div id="valley-info">지도에서 계곡을 클릭하세요.</div>
    <div id="ad-banner">📢 광고 배너 자리</div>
    <div id="footer">문의/후원: example@email.com</div>
  </div>

  <!-- 네이버 지도 API -->
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=GUWcwiXW5X4PGnZgKSYHu8SXTwPfu2AbYVVk8zcs"></script>
  <script>
    let valleys = [];

    const map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.5665, 126.9780),
      zoom: 8
    });

    const markers = [];

    // 데이터 불러오기
    fetch("정보.json")
      .then(res => res.json())
      .then(data => {
        valleys = data;
        renderMarkers();
      })
      .catch(err => console.error("데이터 불러오기 실패:", err));

    function renderMarkers() {
      markers.forEach(m => m.setMap(null));
      markers.length = 0;

      const region = document.getElementById('region-filter').value;
      const parking = document.getElementById('parking-filter').value;

      valleys.forEach(valley => {
        if ((region === 'all' || valley.region === region) &&
            (parking === 'all' || valley.parking === parking)) {
          const marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(valley.lat, valley.lng),
            map: map,
            title: valley.name
          });

          naver.maps.Event.addListener(marker, 'click', function() {
            showValleyInfo(valley);
          });

          markers.push(marker);
        }
      });

      renderList();
    }

    function renderList() {
      const list = document.getElementById('valley-list');
      list.innerHTML = '';

      const region = document.getElementById('region-filter').value;
      const parking = document.getElementById('parking-filter').value;

      valleys.forEach(valley => {
        if ((region === 'all' || valley.region === region) &&
            (parking === 'all' || valley.parking === parking)) {
          const li = document.createElement('li');
          li.textContent = valley.name;
          li.onclick = () => showValleyInfo(valley);
          list.appendChild(li);
        }
      });
    }

    function showValleyInfo(valley) {
      document.getElementById('valley-info').innerHTML = `
        <h3>${valley.name}</h3>
        <p>지역: ${valley.region}</p>
        <p>수심: ${valley.depth}</p>
        <p>주차: ${valley.parkingInfo}</p>
      `;
    }

    document.getElementById('region-filter').addEventListener('change', renderMarkers);
    document.getElementById('parking-filter').addEventListener('change', renderMarkers);
  </script>
</body>
</html>


